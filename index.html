<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Steinmetz Core Loss Calculator</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <link rel="stylesheet" href="http://emlizard.github.io/steinmetzlizard/style.css">
  
</head>
<body>
  <div class="container">
    <h1>Steinmetz Core Loss Calculator</h1>

    <label for="model">Model Selection:</label>
    <select id="model">
      <option value="CSE" selected>Classical (CSE)</option>
      <option value="MSE">Modified (MSE)</option>
      <option value="GSE">Generalized (GSE)</option>
      <option value="iGSE">Improved GSE (iGSE)</option>
    </select>

    <div class="param-grid">
      <div><label for="f">Frequency f (kHz):</label><input type="number" id="f" value="1" step="any"></div>
      <div><label for="Bpk">Peak Flux Bₚₖ (mT):</label><input type="number" id="Bpk" value="100" step="any"></div>
      <div><label for="volume">Core Volume V (cm³):</label><input type="number" id="volume" value="100" step="any"></div>
    </div>

    <div id="params-CSE" class="param-grid">
      <div><label for="k">k:</label><input type="number" id="k" value="1e-3" step="any"></div>
      <div><label for="alpha">α:</label><input type="number" id="alpha" value="1.6" step="any"></div>
      <div><label for="beta">β:</label><input type="number" id="beta" value="2.2" step="any"></div>
    </div>
    <div id="params-MSE" class="param-grid hidden">
      <div><label for="kh">kₕ:</label><input type="number" id="kh" value="1e-3" step="any"></div>
      <div><label for="ke">kₑ:</label><input type="number" id="ke" value="1e-6" step="any"></div>
      <div><label for="alpha2">α:</label><input type="number" id="alpha2" value="1.6" step="any"></div>
      <div><label for="beta2">β:</label><input type="number" id="beta2" value="2.2" step="any"></div>
    </div>
    <div id="params-GSE" class="param-grid hidden">
      <div style="grid-column: span 3; margin-bottom:0;"><p>Sinusoidal: \(B(t)=B_{pk}\sin(2\pi f t)\)</p></div>
      <div><label for="ki">kᵢ:</label><input type="number" id="ki" value="1e-6" step="any"></div>
      <div><label for="alpha3">α:</label><input type="number" id="alpha3" value="1.6" step="any"></div>
      <div><label for="beta3">β:</label><input type="number" id="beta3" value="2.2" step="any"></div>
      <div><label for="steps">Steps:</label><input type="number" id="steps" value="500" step="1"></div>
    </div>
    <div id="params-iGSE" class="param-grid hidden">
      <div style="grid-column: span 3; margin-bottom:0;"><p>iGSE: Time Integration</p></div>
      <div><label for="kh2">kₕ:</label><input type="number" id="kh2" value="1e-6" step="any"></div>
      <div><label for="ke2">kₑ:</label><input type="number" id="ke2" value="1e-6" step="any"></div>
      <div><label for="alpha4">α:</label><input type="number" id="alpha4" value="1.6" step="any"></div>
      <div><label for="beta4">βₕ:</label><input type="number" id="beta4" value="2.2" step="any"></div>
      <div><label for="steps2">Steps:</label><input type="number" id="steps2" value="500" step="1"></div>
    </div>

    <button id="computeBtn">Calculate P<sub>v</sub></button>
    <div id="result"></div>

    <h3>Graph Range</h3>
    <div class="param-grid">
      <div><label for="fMin">f Min (kHz):</label><input type="number" id="fMin" value="0.1" step="any"></div>
      <div><label for="fMax">f Max (kHz):</label><input type="number" id="fMax" value="100" step="any"></div>
      <div><label for="fSteps"># steps:</label><input type="number" id="fSteps" value="30" step="1"></div>
      <div><label for="BMin">B Min (mT):</label><input type="number" id="BMin" value="10" step="any"></div>
      <div><label for="BMax">B Max (mT):</label><input type="number" id="BMax" value="200" step="any"></div>
      <div><label for="BSteps"># steps:</label><input type="number" id="BSteps" value="30" step="1"></div>
    </div>
    <button id="plotBtn">Draw Plot</button>
    <div id="graph"></div>

    <div id="formulas">
      <h3>Steinmetz Equations</h3>
      <p>Classical (CSE):<br>$$P_v = k\,f^{\alpha}\,B_{pk}^{\beta}$$</p>
      <p>Modified (MSE):<br>$$P_v = k_h\,f^{\alpha}\,B_{pk}^{\beta} + k_e\,f\,B_{pk}^2$$</p>
      <p>Generalized (GSE):<br>$$P_v = \frac{1}{T}\int_0^T k_i\lvert\tfrac{dB}{dt}\rvert^{\alpha}\lvert B\rvert^{\beta}\,dt$$</p>
      <p>Improved (iGSE):<br>$$P_v = \frac{1}{T}\int_0^T\Bigl(k_h\lvert B\rvert^{\beta_H}+k_e f\lvert B\rvert^2\Bigr)\lvert\tfrac{dB}{dt}\rvert^{\alpha_H}dt$$</p>
    </div>
  </div>
  <script src="http://emlizard.github.io/steinmetzlizard/script.js">
</body>
</html>
